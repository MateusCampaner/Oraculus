{% load static %}

{% include 'partials/head.html' %}

{% include 'partials/header.html' %}

<style>
  .numeric-input::-webkit-inner-spin-button,
  .numeric-input::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  .numeric-input {
    padding: 4px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 14px;
    width: 50px;
  }
</style>

{% include 'partials/modal_confirmacao.html' %}

{% include 'partials/modal_upload_csv.html' %}



<div class="container my-5">
    <div class="mb-5">
      <h1 class="text-body-emphasis">Inserir Análise</h1>
      <p>
        Insira os dados de uma análise de solo para recomendar o melhor tipo de plantio
      </p>

      <a href="#" class="link-body-emphasis text-decoration-none" aria-expanded="false"
     data-toggle="modal" data-target="#modalUploadCSV">
      <button id="uploadCSV" class="btn btn-primary rounded-pill px-3 mx-right">
        <i class="bi bi-upload pe-2"></i> Importar CSV</button>
      </a>

      <button id="downloadCSV" class="btn btn-success rounded-pill px-3 mx-right">
        <i class="bi bi-download pe-2 "></i> Baixar modelo CSV
      </button>

    </div>

      <div class="table-responsive small">
        <table class="table table-striped table-sm">
          <thead>
            <tr>
              <th scope="col">N</th>
              <th scope="col">P</th>
              <th scope="col">K</th>
              <th scope="col">Umidade</th>
              <th scope="col">Temperatura</th>
              <th scope="col">ph</th>
              <th scope="col">Chuva</th>
            </tr>
          </thead>
          <tbody>
            {% for item in items %}
            <tr>
              <td><input class="numeric-input" type="number" value="{{ item.n }}"></td>
              <td><input class="numeric-input" type="number" value="{{ item.p }}"></td>
              <td><input class="numeric-input" type="number" value="{{ item.k }}"></td>
              <td><input class="numeric-input" type="number" value="{{ item.umidade }}"></td>
              <td><input class="numeric-input" type="number" value="{{ item.temperatura }}"></td>
              <td><input class="numeric-input" type="number" value="{{ item.ph }}"></td>
              <td><input class="numeric-input" type="number" value="{{ item.chuva }}"></td>
              <td><button class="remove-row-button">Remover</button></td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    
      <button id="addRowButton" class="btn btn-primary rounded-pill px-3">
        <i class="bi bi-plus-circle pe-2"></i> Adicionar Linha</button>

      <button id="sendInfo" class="btn btn-success rounded-pill px-3" aria-expanded="false"
      data-toggle="modal" data-target="#modalConfirm">
      <i class="bi bi-arrow-up-right pe-2"></i> Enviar dados
      </button>

      <script>
        const addRowButton = document.getElementById("addRowButton");
        addRowButton.addEventListener("click", () => {
          const tbody = document.querySelector("tbody");
          const newRow = document.createElement("tr");
          newRow.innerHTML = `
          <td><input class="numeric-input" type="number" value="New"></td>
          <td><input class="numeric-input" type="number" value="Row"></td>
          <td><input class="numeric-input" type="number" value="Data"></td>
          <td><input class="numeric-input" type="number" value="Here"></td>
          <td><input class="numeric-input" type="number" value="New"></td>
          <td><input class="numeric-input" type="number" value="Row"></td>
          <td><input class="numeric-input" type="number" value="Data"></td>
          <td><button class="remove-row-button btn btn-danger rounded-pill px-2.5">X</button></td>
          `;
          tbody.appendChild(newRow);
      
          const removeButtons = document.querySelectorAll(".remove-row-button");
          removeButtons.forEach(button => {
            button.addEventListener("click", () => {
              const row = button.parentNode.parentNode;
              row.remove();
            });
          });
        });
      </script>

{% include 'partials/footer.html' %}