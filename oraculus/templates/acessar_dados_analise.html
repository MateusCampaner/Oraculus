{% load static %}

{% include 'partials/head.html' %}

{% include 'partials/header.html' %}

<style>
    .numeric-input::-webkit-inner-spin-button,
    .numeric-input::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    
    .numeric-input {
      padding: 4px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px;
      width: 50px;
      text-align: center;
      background-color: #F2F2F2;
    }

    input:focus {
      outline: none; 
      border: 1px solid #ccc;
    }

  </style>

<body>

    <div class="container my-5">
      <div class="mb-5">
        <h1 class="text-body-emphasis">Análises de solo</h1>
        <p>
          Acesse os dados das suas analises de recomendações de solo
        </p>
  
        <br>
  
        <main class="container">
  
            <a href="{% url 'acessar_dados_analise' %}" class="btn btn-secondary px-3 pe-3"></i>
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-clipboard-data" viewBox="0 0 16 16">
                    <path d="M4 11a1 1 0 1 1 2 0v1a1 1 0 1 1-2 0v-1zm6-4a1 1 0 1 1 2 0v5a1 1 0 1 1-2 0V7zM7 9a1 1 0 0 1 2 0v3a1 1 0 1 1-2 0V9z"/>
                    <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                    <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
                  </svg> Análise
              </a>
      
              <a href="{% url 'acessar_dados_modelo' %}" class="btn btn-primary px-3 pe-3"></i>
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-cpu-fill" viewBox="0 0 16 16">
                    <path d="M6.5 6a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z"/>
                    <path d="M5.5.5a.5.5 0 0 0-1 0V2A2.5 2.5 0 0 0 2 4.5H.5a.5.5 0 0 0 0 1H2v1H.5a.5.5 0 0 0 0 1H2v1H.5a.5.5 0 0 0 0 1H2v1H.5a.5.5 0 0 0 0 1H2A2.5 2.5 0 0 0 4.5 14v1.5a.5.5 0 0 0 1 0V14h1v1.5a.5.5 0 0 0 1 0V14h1v1.5a.5.5 0 0 0 1 0V14h1v1.5a.5.5 0 0 0 1 0V14a2.5 2.5 0 0 0 2.5-2.5h1.5a.5.5 0 0 0 0-1H14v-1h1.5a.5.5 0 0 0 0-1H14v-1h1.5a.5.5 0 0 0 0-1H14v-1h1.5a.5.5 0 0 0 0-1H14A2.5 2.5 0 0 0 11.5 2V.5a.5.5 0 0 0-1 0V2h-1V.5a.5.5 0 0 0-1 0V2h-1V.5a.5.5 0 0 0-1 0V2h-1V.5zm1 4.5h3A1.5 1.5 0 0 1 11 6.5v3A1.5 1.5 0 0 1 9.5 11h-3A1.5 1.5 0 0 1 5 9.5v-3A1.5 1.5 0 0 1 6.5 5z"/>
                  </svg> Modelo
              </a>
  
          <br>
          <br>
  
          <div class="input-group mb-3">

            <input type="text" class="form-control link-body-emphasis text-decoration-none" placeholder="Pesquisar" id="searchInput">
            <button class="btn btn-primary" type="button" id="button-addon2">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
              </svg>
            </button>

          </div>

          <input type="text" id="filtroColheita" placeholder="Pesquisar por nome da colheita">

          <br>
  
          <div class="my-3 p-3 bg-body rounded shadow-sm">
            <h4 class="border-bottom pb-2 mb-0">Análises</h4>
  
            {% for analise in analises %}
            <div class="analise" data-colheita="{{ analise.Colheita | lower }}"></div>
              
            <div class="filtros d-flex text-body-secondary pt-3">
              <img src="../static/img/clipboard-data.svg" alt="logo-oraculus" width="32px" height="32px">
              <div class="pb-3 mb-0 small lh-sm border-bottom w-100">
                
                <div class="d-flex justify-content-between">
  
                <h4><strong class="text-body-emphasis ps-2"><a href="{% url 'visualizar_analise' analise.id %}">Análise {{ analise.id }}</a></strong></h4>
  
                </div>

                  <h4 class="text-body-emphasis pb-1">Usuário: {{ analise.usuario }}</h4>
                  <h4 id="resultadoPesquisa" class="text-body-emphasis pt-3 pb-1">{{ analise.Colheita }}</h4>
  
                  <div class="table-responsive small">
                    <table class="table table-striped table-sm tabela-dados">
                      <thead>
                        <tr>
                          <th scope="col"><img src="../static/img/eyedropper.svg" alt="logo-oraculus" width="16px" height="16px"> Nitrogênio</th>
                          <th scope="col"><img src="../static/img/eyedropper.svg" alt="logo-oraculus" width="16px" height="16px"> Fósforo</th>
                          <th scope="col"><img src="../static/img/eyedropper.svg" alt="logo-oraculus" width="16px" height="16px"> Potássio</th>
                          <th scope="col"><img src="../static/img/thermometer-half.svg" alt="logo-oraculus" width="16px" height="16px"> Temperatura</th>
                          <th scope="col"><img src="../static/img/droplet-half.svg" alt="logo-oraculus" width="16px" height="16px"> Umidade</th>
                          <th scope="col"><img src="../static/img/moisture.svg" alt="logo-oraculus" width="16px" height="16px"> ph</th>
                          <th scope="col"><img src="../static/img/cloud-rain-fill.svg" alt="logo-oraculus" width="16px" height="16px"> Chuva</th>
                        </tr>
                      </thead>
                      <tbody>
                    
                          <tr>
                            <td><input class="numeric-input" type="number" name="N" value="{{analise.N}}" readonly></td>
                            <td><input class="numeric-input" type="number" name="P" value="{{analise.P}}" readonly></td>
                            <td><input class="numeric-input" type="number" name="K" value="{{analise.K}}" readonly></td>
                            <td><input class="numeric-input" type="float" name="Temperatura" value="{{analise.Temperatura}}" readonly></td>
                            <td><input class="numeric-input" type="float" name="Umidade" value="{{analise.Umidade}}" readonly></td>
                            <td><input class="numeric-input" type="float" name="pH" value="{{analise.pH}}" readonly></td>
                            <td><input class="numeric-input" type="float" name="Chuva" value="{{analise.Chuva}}" readonly></td>
                          </tr>
            
                      </tbody>
                    </table>
                  </div>

              </div>
            </div>
              
            {% endfor %}
  
        </main>
  
      </div>
    </div>
  
  </body>

  <script>
    const inputColheita = document.getElementById('filtroColheita');
    const analises = document.querySelectorAll('.analise');

    inputColheita.addEventListener('input', function() {
        const filtro = inputColheita.value.toLowerCase().trim();

        analises.forEach(function(analise) {
            const colheita = analise.getAttribute('data-colheita');
            const shouldDisplay = colheita.includes(filtro);

            // Exibe ou oculta a análise conforme corresponda ao filtro
            if (shouldDisplay) {
                analise.style.display = 'block';
            } else {
                analise.style.display = 'none';
            }
        });
    });
</script>

{% include 'partials/footer.html' %}