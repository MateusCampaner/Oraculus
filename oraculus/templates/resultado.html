{% load static %}

{% include 'partials/head.html' %}

{% include 'partials/header.html' %}

<style>
  .numeric-input::-webkit-inner-spin-button,
  .numeric-input::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  .numeric-input {
    padding: 4px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 14px;
    width: 50px;
  }

  .hidden {
    display: none;
  }
</style>


<div class="container my-5">
  <div class="mb-5">
    <h1 class="text-body-emphasis">Resultado Análise</h1>

    <div class="my-3 p-3 bg-body rounded shadow-sm">
      <h6 class="border-bottom pb-2 mb-0">Com base nos seus resultados a melhor colheita é:</h6>

      <div class="d-flex text-body-secondary pt-3">
        <div class="pb-3 mb-0 small lh-sm border-bottom w-100">
          <div class="d-flex justify-content-between">

            <h3 class="text-body-emphasis">{{ colheita_prevista }}</h3>

          </div>

        </div>
      </div>

    <br>
    
   <button id="showInfo" class="btn btn-primary rounded-pill px-3 mx-right">
    <i id="icon" class="bi bi-eye pe-2"></i>Ver dados inseridos</button>
   </a>

   <button type=submit class="btn btn-success rounded-pill px-3 mx-right">
    <i class="bi bi-save pe-2"></i> Salvar análise
   </button>

  </div>

    <div class="table-responsive small hidden" id="analiseTable">
      <table class="table table-striped table-sm">
        <thead>
          <tr>
            <th scope="col">N</th>
            <th scope="col">P</th>
            <th scope="col">K</th>
            <th scope="col">Umidade</th>
            <th scope="col">Temperatura</th>
            <th scope="col">ph</th>
            <th scope="col">Chuva</th>
          </tr>
        </thead>
        <tbody>
          <form action="{% url 'salvar_algoritmo_analise' %}" method="POST">

            {% csrf_token %}
          <tr>
            <td><input class="numeric-input" type="number" value="{{ N }}" readonly></td>
            <td><input class="numeric-input" type="number" value="{{ P }}" readonly></td>
            <td><input class="numeric-input" type="number" value="{{ K }}" readonly></td>
            <td><input class="numeric-input" type="number" value="{{ Umidade }}" readonly></td>
            <td><input class="numeric-input" type="number" value="{{ Temperatura }}" readonly></td>
            <td><input class="numeric-input" type="number" value="{{ pH }}" readonly></td>
            <td><input class="numeric-input" type="number" value="{{ Chuva }}" readonly></td>
          </tr>

          <button type="submit" id="sendInfo" class="btn btn-success rounded-pill px-3" aria-expanded="false"
      data-toggle="modal">
      <i class="bi bi-arrow-up-right pe-2"></i> Enviar dados
      </button>

    </form>
        </tbody>
      </table>
    </div>

    <form action="{% url 'salvar_algoritmo_analise' %}" method="POST">

              {% csrf_token %}
              <tr>
                <td><input class="numeric-input" type="number" value="{{ N }}" readonly></td>
                <td><input class="numeric-input" type="number" value="{{ P }}" readonly></td>
                <td><input class="numeric-input" type="number" value="{{ K }}" readonly></td>
                <td><input class="numeric-input" type="number" value="{{ Umidade }}" readonly></td>
                <td><input class="numeric-input" type="number" value="{{ Temperatura }}" readonly></td>
                <td><input class="numeric-input" type="number" value="{{ pH }}" readonly></td>
                <td><input class="numeric-input" type="number" value="{{ Chuva }}" readonly></td>
              </tr>

      <button type="submit" id="sendInfo" class="btn btn-success rounded-pill px-3" aria-expanded="false"
      data-toggle="modal">
      <i class="bi bi-arrow-up-right pe-2"></i> Enviar dados
      </button>

    </form>

  </div>
</div>



<script>
  const sendInfoButton = document.getElementById('showInfo');
  const recommendationTable = document.getElementById('analiseTable');

  sendInfoButton.addEventListener('click', () => {
    recommendationTable.classList.toggle('hidden');
  });

  document.getElementById("showInfo").addEventListener("click", function() {
    var icon = document.getElementById("icon");
    if (icon.classList.contains("bi-eye")) {
        icon.classList.remove("bi-eye");
        icon.classList.add("bi-eye-slash");
    } else {
        icon.classList.remove("bi-eye-slash");
        icon.classList.add("bi-eye");
    }
});
</script>

{% include 'partials/footer.html' %}